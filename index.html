<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Servit√∏r - Bestilling</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-slate-900 text-white font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- DIN KONFIGURASJON ---
        // Bytt ut disse med verdiene fra dine skjermbilder:
        const SUPABASE_URL = 'https://kirklktgeuqvkxhfibth.supabase.co'; 
        const SUPABASE_KEY = 'sb_publishable_btB05RbKic_mG3lPpQ7jpw_NOkma2bE'; // Lim inn den som starter med sb_publishable
        
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        const MenuApp = () => {
            const [cart, setCart] = useState([]);
            const [orderSent, setOrderSent] = useState(false);

            const menuItems = [
                { id: 1, name: "Tr√∏ffelpasta", price: 245 },
                { id: 2, name: "Grillet Entrec√¥te", price: 395 },
                { id: 3, name: "Sashimi-tallerken", price: 185 }
            ];

            const addToCart = (item) => setCart([...cart, item]);

            const sendOrder = async () => {
                if (cart.length === 0) return;
                
                const itemNames = cart.map(i => i.name).join(", ");
                
                // Her sender vi dataen til Supabase-tabellen din!
                const { error } = await supabaseClient
                    .from('orders')
                    .insert([{ 
                        table_number: 12, 
                        items: itemNames, 
                        status: 'ny' 
                    }]);

                if (error) {
                    alert("Noe gikk galt: " + error.message);
                } else {
                    setOrderSent(true);
                    setCart([]);
                }
            };

            return (
                <div className="p-8 max-w-2xl mx-auto">
                    <header className="mb-10 text-center">
                        <h1 className="text-4xl font-extrabold text-emerald-400 tracking-tight">AI Waiter</h1>
                        <p className="text-slate-400 mt-2">Bord 12 - Velkommen!</p>
                    </header>
                    
                    {!orderSent ? (
                        <div className="space-y-6">
                            <div className="grid gap-4">
                                {menuItems.map(item => (
                                    <div key={item.id} className="bg-slate-800 p-5 rounded-2xl flex justify-between items-center border border-slate-700 hover:border-emerald-500/50 transition">
                                        <div>
                                            <h3 className="font-bold text-lg">{item.name}</h3>
                                            <p className="text-emerald-400 font-mono">{item.price},-</p>
                                        </div>
                                        <button 
                                            onClick={() => addToCart(item)} 
                                            className="bg-emerald-500 hover:bg-emerald-600 w-12 h-12 rounded-full font-bold text-2xl shadow-lg active:scale-90 transition"
                                        > + </button>
                                    </div>
                                ))}
                            </div>

                            {cart.length > 0 && (
                                <div className="bg-slate-800 p-6 rounded-3xl border-2 border-emerald-500 shadow-2xl animate-in fade-in slide-in-from-bottom-4 duration-500">
                                    <h2 className="text-xl font-bold mb-4">Din bestilling</h2>
                                    <ul className="mb-6 space-y-2">
                                        {cart.map((item, i) => (
                                            <li key={i} className="flex justify-between text-slate-300">
                                                <span>{item.name}</span>
                                                <span>{item.price},-</span>
                                            </li>
                                        ))}
                                    </ul>
                                    <button 
                                        onClick={sendOrder} 
                                        className="w-full bg-emerald-500 py-4 rounded-2xl font-bold text-xl hover:bg-emerald-600 transition"
                                    >
                                        Send til kj√∏kkenet
                                    </button>
                                </div>
                            )}
                        </div>
                    ) : (
                        <div className="text-center bg-slate-800 p-12 rounded-3xl border border-emerald-500 shadow-2xl">
                            <div className="text-6xl mb-4">üë®‚Äçüç≥</div>
                            <h2 className="text-2xl font-bold mb-2">Takk for bestillingen!</h2>
                            <p className="text-slate-400">Kj√∏kkenet har mottatt ordren din og vil snart angi estimert ventetid.</p>
                            <button 
                                onClick={() => setOrderSent(false)} 
                                className="mt-8 text-emerald-400 underline"
                            > Bestill noe mer? </button>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MenuApp />);
    </script>
</body>
</html>
